<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: SJTest</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: SJTest</h1>

    




<section>

<header>
    
        <h2>SJTest</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="SJTest"><span class="type-signature"></span>new SJTest<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Simple Javascript Testing (for browser-based code).

Extend an existing object if present, to allow the user to put in settings.
The default values below use ||s to let any user settings take precedence.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line148">line 148</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".LOGTAG"><span class="type-signature">(static) </span>LOGTAG<span class="type-signature"></span></h4>




<div class="description">
    Used with all console.log output, for easy filtering.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line178">line 178</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id=".version"><span class="type-signature">(static) </span>version<span class="type-signature"></span></h4>




<div class="description">
    What version of SJTest is this?
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line160">line 160</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id=".wait"><span class="type-signature">(static) </span>wait<span class="type-signature"></span></h4>




<div class="description">
    If true, isDone() will return false.
Use-case: To avoid PhantomJS stopping early before after-page-load tests are setup,
set true while loading & setting up tests, then you must set to false.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line168">line 168</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>SJTest.minTime</li>
        </ul>
    </dd>
    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".assert"><span class="type-signature">(static) </span>assert<span class="signature">(betrue, msg)</span><span class="type-signature"></span></h4>

    



<div class="description">
    An assert function.
Error handling can be overridden by replacing SJTest.assertFailed()
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>betrue</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">If true (or any truthy value), do nothing. If falsy, console.error and throw an Error.
           HACK: As a special convenience, the empty jQuery result (ie a jquery select which find nothing) is considered to be false!
           For testing jQuery selections: Use e.g. $('#foo').length</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">Message on error. This can be an object (which will be logged to console as-is,
           and converted to a string for the error).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line432">line 432</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    betrue on success. This allows assert() to be used as a transparent wrapper.
E.g. you might write <code>var x = assert(mything.propertyWhichMustExist);</code>
</div>



    



        
            

    

    <h4 class="name" id=".assertFailed"><span class="type-signature">(static) </span>assertFailed<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Handle assert() failures. Users can replace this with a custom handler.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line448">line 448</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id=".assertMatch"><span class="type-signature">(static) </span>assertMatch<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Convenience for assert(match(value, matcher), value+" !~ "+matcher);
Because it's a common use case.
Arguments are alternating [airs of value, matcher (as many pairs as you like).
E.g. assertMatch(myNumericValue, Number); or assertMatch(myNumericValue, Number, specificStringValue, "foo|bar");
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line462">line 462</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id=".display"><span class="type-signature">(static) </span>display<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Called automatically. Adds a table of test results to the page. The table floats above the normal page, and can be closed.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line340">line 340</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id=".expectTests"><span class="type-signature">(static) </span>expectTests<span class="signature">(n, timeout<span class="signature-attributes">nullable</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    How many tests should we see? If less than this, then the page's tests are not yet done.
Use-case: for async / delayed tests, to make sure they aren't skipped.

This is itself a test (so you can see it pass/fail) -- but it is _not_ counted as one of the n.

Note: Currently, this can only be called once per page.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">How many tests does this page have?
(excludes the expectTests one which this call will make)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">Milliseconds. Defaults to 10,000 (10 seconds)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line769">line 769</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id=".isa"><span class="type-signature">(static) </span>isa<span class="signature">(obj, klass)</span><span class="type-signature"> &rarr; {Boolean}</span></h4>

    



<div class="description">
    Like instanceof, but more robust.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>obj</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">Can be null/undefined (returns false)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>klass</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">e.g. Number</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line480">line 480</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    true if obj is an example of klass.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".isDone"><span class="type-signature">(static) </span>isDone<span class="signature">()</span><span class="type-signature"> &rarr; {Boolean}</span></h4>

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line246">line 246</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    true if all tests are run, and minTime has expired
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".match"><span class="type-signature">(static) </span>match<span class="signature">(value, matcher)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Flexible matching test
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>matcher</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">Can be another value.
	Or a Class.
	Or a JSDoc-style class spec such as "?Number" or "Number|Function".
	Or a regex (for matching against strings).
	Or true/false (which match based on ifs semantics, e.g. '' matches false).
	Or an object (which does partial matching, allowing value to have extra properties).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line503">line 503</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    true if value matches, false otherwise
</div>



    



        
            

    

    <h4 class="name" id=".removeValue"><span class="type-signature">(static) </span>removeValue<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    array utility: remove by value. @return array
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line625">line 625</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id=".run"><span class="type-signature">(static) </span>run<span class="signature">(testSet)</span><span class="type-signature"></span></h4>

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>testSet</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">A set of test functions to run, e.g. { name:
           "MySimpleTests" MyTest1: function() { assert( 1+1 == 2); }
           MyTest2: function() { assert(match("aa", /[abc]+/)); } }</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line223">line 223</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id=".runScript"><span class="type-signature">(static) </span>runScript<span class="signature">(url, after<span class="signature-attributes">nullable</span>)</span><span class="type-signature"></span></h4>

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Can be absolute or relative to the page.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>after</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">Optional callback to run after loading.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line640">line 640</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id=".runScriptFromUrl"><span class="type-signature">(static) </span>runScriptFromUrl<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Use with SJTest=PathToMyScript in the page url.
Call this to run a script (if there is one) specified by SJTest=path in the url parameters.
<p>
Note: This is restricted to relative urls for security. This may still have
security implications. If you call this, you allow a potentially malicious link
to run arbitrary scripts from the same domain in the page. So do not
use if an attacker could place a script onto the same domain, or abuse
one of yours.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line669">line 669</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id=".runTest"><span class="type-signature">(static) </span>runTest<span class="signature">(testName<span class="signature-attributes">non-null</span>, testFn<span class="signature-attributes">nullable</span>, waitFor<span class="signature-attributes">nullable</span>, timeout<span class="signature-attributes">nullable</span>)</span><span class="type-signature"></span></h4>

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>testName</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>testFn</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">If null, look for a test by this name.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>waitFor</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">A check for test-success which will be run
           periodically. Returns true when done (or a String, which
           will be reported as the test-details). Throw an error if
           the test fails.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">max milliseconds to allow. Default to 10000 (10 seconds)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line278">line 278</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id=".waitFor"><span class="type-signature">(static) </span>waitFor<span class="signature">(condition, callback<span class="signature-attributes">nullable</span>, timeout<span class="signature-attributes">nullable</span>, onTimeout<span class="signature-attributes">nullable</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Waitfor, adapted from http://blog.jeffscudder.com/2012/07/waitfor-javascript.html
This does *not* block, but calls the callback when ready and any then/done/fail deferred functions.
<p>
Note: Why no blocking? Blocking is problematic given that normal javascript is single-threaded with switching.
Usually you're waiting on an ajax request. Blocking would deny the ajax handler a chance to run. So you would
block forever.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>condition</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">return true when ready. Errors are ignored.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">Called once condition is true.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">Max time in milliseconds. If unset: wait indefinitely.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onTimeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">Called if timeout occurs.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="SJTest.js.html">SJTest.js</a>, <a href="SJTest.js.html#line707">line 707</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A jQuery deferred object (IF jQuery is present), so you can do waitFor(X).then(Y). null if no jQuery.
</div>



    



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ATest.html">ATest</a></li><li><a href="SJTest.html">SJTest</a></li></ul><h3>Global</h3><ul><li><a href="global.html#details">details</a></li><li><a href="global.html#SJTestUtils">SJTestUtils</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Mon Jan 16 2017 22:03:42 GMT+0000 (GMT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>